<!-- @format -->

# City Walks Client

This is a React client built to interact with the express server contained in this repository.

## Getting Started

Clone the repo:

`gh repo clone mike1234-pixel/city-walks`

### 1) Server

To install dependencies, cd into the root directory and run:

`yarn add`

To start the API run:

`yarn server`

### 2) Client

To install dependencies, cd into the **client** directory and run:

`npm install`

To start the development server cd into the **client** directory and run:

`npm start`

## State Management

Global state is managed by the **React Context API**. The context files can be found in the **context** folder in the **src** directory.

The App component is wrapped in context providers in **index.js** in the **src** directory.

State is managed locally to components in cases where state is only required locally, such as in **./src/components/pages/Admin/Admin.jsx**

The `userFirstName`, `userId` credentials and `loggedIn` state are stored in `localStorage` in `LoginContext`. When the user logs out local storage is cleared and the user state reset.

## Ajax

All ajax requests are made using the **axios** and **qs** packages.

## Recaptcha

Google recaptcha is set up in **./src/components/page/Contact/Contact.jsx** withe the following code:

```javascript
window.grecaptcha.ready(() => {
  window.grecaptcha.execute(siteKey, { action: "submit" }).then((token) => {
    submitData(token);
  });
});
```

All other inputs on the app require the use of an activated account where the user's email has been verified, and so do not use recaptcha.

If the recaptcha score is less than 0.7 the server will reject the request.

## Routing

**react-router-dom** is used for routing the frontend.

Dynamic routing is generated by **react-router-dom** dom for the `Threads` and `Walk` components.

Routing logic can be found in the `Router` component in **./src/container/Router/Router.jsx**.

## Testing

Test files are kept in the same folders as the components they test.

The client contains:

- **jest** snapshot tests.
- **react-testing-library** integration tests.

To run the tests run:

`npm test`

## Future Improvements

- If the database grows significantly in size then **lazy loading / infinite scrolling** should be implemented.
